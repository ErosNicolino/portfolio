const translations = {
  pt: {
    site_title: "Eros Nicolino — Software Engineer",
    nav_home: "Home",
    nav_projects: "Projetos",
    nav_skills: "Skills",
    nav_about: "Sobre",
    nav_contact: "Contato",

    // HERO
    hero_title:
      'Crafting logic into <br /> <span class="italic-accent">intelligent systems.</span>',
    hero_lead:
      "Especialista em Engenharia de Dados, IA e Sistemas de Tempo Real. Transformando complexidade em arquiteturas escaláveis.",
    hero_btn_projects: "Ver Portfolio",
    hero_btn_cv: "Download CV",

    // PROJETOS
    projects_title: "Projetos Selecionados",

    // TAGS DOS PROJETOS
    tag_pong: "Agente de IA",
    tag_pipeline: "Engenharia de Dados",
    tag_livelink: "WebRTC & Sockets",
    tag_api: "Backend API",
    tag_battleship: "Algorithms",

    // DETALHES DOS PROJETOS
    proj_1_title: "Pong AI Agent",
    proj_1_desc: "Agente autônomo treinado via Deep Q-Networks (DQN).",

    proj_2_title: "Serverless Data Pipeline",
    proj_2_desc:
      "Arquitetura 100% serverless na AWS para dados financeiros da B3.",

    proj_3_title: "LiveLink Streaming",
    proj_3_desc:
      "Streaming P2P de baixa latência (<300ms) sem servidores de mídia.",

    proj_4_title: "Enterprise Books API",
    proj_4_desc: "API robusta com JWT e Swagger. Demo Live.",

    proj_5_title: "Probabilistic Battleship",
    proj_5_desc: "IA baseada em mapas de calor probabilísticos.",

    // SKILLS
    skills_title: "Expertise",
    skills_ai_title: "Data & AI",
    skills_backend_title: "Cloud & Backend",
    skills_systems_title: "Real-Time Systems",

    // SOBRE
    about_title: "Sobre Mim",
    about_p1:
      "Atuo na intersecção entre a precisão dos dados e a criatividade do software. Minha trajetória é marcada pela construção de pipelines ETL robustos na AWS e pelo desenvolvimento de algoritmos de Machine Learning aplicados ao mundo real.",
    edu_1_title: "Pós-Graduação: ML Engineering",
    edu_1_school: "FIAP (Previsto: 2026)",
    edu_2_title: "Gestão de TI",
    edu_2_school: "FAM (2025)",

    // FOOTER
    footer_title: "Vamos construir algo incrível.",
    footer_btn_contact: "Entre em Contato",
  },
  en: {
    site_title: "Eros Nicolino — Software Engineer",
    nav_home: "Home",
    nav_projects: "Projects",
    nav_skills: "Skills",
    nav_about: "About",
    nav_contact: "Contact",

    // HERO
    hero_title:
      'Crafting logic into <br /> <span class="italic-accent">intelligent systems.</span>',
    hero_lead:
      "Specializing in Data Engineering, AI, and Real-Time Systems. Turning complexity into scalable architectures.",
    hero_btn_projects: "View Portfolio",
    hero_btn_cv: "Download CV",

    // PROJECTS
    projects_title: "Selected Projects",

    // TAGS
    tag_pong: "AI Agent",
    tag_pipeline: "Data Engineering",
    tag_livelink: "WebRTC & Sockets",
    tag_api: "Backend API",
    tag_battleship: "Algorithms",

    proj_1_title: "Pong AI Agent",
    proj_1_desc: "Autonomous agent trained via Deep Q-Networks (DQN).",

    proj_2_title: "Serverless Data Pipeline",
    proj_2_desc: "Fully serverless architecture on AWS for B3 financial data.",

    proj_3_title: "LiveLink Streaming",
    proj_3_desc: "Low-latency (<300ms) P2P streaming without media servers.",

    proj_4_title: "Enterprise Books API",
    proj_4_desc: "Robust API with JWT and Swagger. Live Demo.",

    proj_5_title: "Probabilistic Battleship",
    proj_5_desc: "AI powered by probabilistic heatmaps.",

    // SKILLS
    skills_title: "Expertise",
    skills_ai_title: "Data & AI",
    skills_backend_title: "Cloud & Backend",
    skills_systems_title: "Real-Time Systems",

    // ABOUT
    about_title: "About Me",
    about_p1:
      "Operating at the intersection of data precision and software creativity. My journey is marked by building robust ETL pipelines on AWS and developing Machine Learning algorithms applied to the real world.",
    edu_1_title: "Postgrad: ML Engineering",
    edu_1_school: "FIAP (Expected: 2026)",
    edu_2_title: "IT Management",
    edu_2_school: "FAM (2025)",

    // FOOTER
    footer_title: "Let's build something amazing.",
    footer_btn_contact: "Get in Touch",
  },
  es: {
    site_title: "Eros Nicolino — Ingeniero de Software",
    nav_home: "Inicio",
    nav_projects: "Proyectos",
    nav_skills: "Habilidades",
    nav_about: "Sobre mí",
    nav_contact: "Contacto",

    // HERO
    hero_title:
      'Crafting logic into <br /> <span class="italic-accent">intelligent systems.</span>',
    hero_lead:
      "Especialista en Ingeniería de Datos, IA y Sistemas en Tiempo Real. Transformando complejidad en arquitecturas escalables.",
    hero_btn_projects: "Ver Portafolio",
    hero_btn_cv: "Descargar CV",

    // PROJECTS
    projects_title: "Proyectos Seleccionados",

    // TAGS
    tag_pong: "Agente de IA",
    tag_pipeline: "Ingeniería de Datos",
    tag_livelink: "WebRTC & Sockets",
    tag_api: "Backend API",
    tag_battleship: "Algorithms",

    proj_1_title: "Pong AI Agent",
    proj_1_desc: "Agente autónomo entrenado vía Deep Q-Networks (DQN).",

    proj_2_title: "Pipeline de Datos Serverless",
    proj_2_desc: "Arquitectura 100% serverless en AWS para datos financieros.",

    proj_3_title: "LiveLink Streaming",
    proj_3_desc:
      "Streaming P2P de baja latencia (<300ms) sin servidores de medios.",

    proj_4_title: "Enterprise Books API",
    proj_4_desc: "API robusta con JWT y Swagger. Demo Live.",

    proj_5_title: "Probabilistic Battleship",
    proj_5_desc: "IA basada en mapas de calor probabilísticos.",

    // SKILLS
    skills_title: "Expertise",
    skills_ai_title: "Data & AI",
    skills_backend_title: "Cloud & Backend",
    skills_systems_title: "Sistemas Real-Time",

    // ABOUT
    about_title: "Sobre mí",
    about_p1:
      "Actúo en la intersección entre la precisión de los datos y la creatividad del software. Mi trayectoria está marcada por la construcción de pipelines ETL robustos en AWS y algoritmos de ML.",
    edu_1_title: "Posgrado: ML Engineering",
    edu_1_school: "FIAP (Previsto: 2026)",
    edu_2_title: "Gestión de TI",
    edu_2_school: "FAM (5)",

    // FOOTER
    footer_title: "Construyamos algo increíble.",
    footer_btn_contact: "Contáctame",
  },
};

document.addEventListener("DOMContentLoaded", () => {
  const langButtons = document.querySelectorAll(".lang-btn");

  const setLanguage = (lang) => {
    const langData = translations[lang];
    if (!langData) return;

    document.querySelectorAll("[data-lang-key]").forEach((element) => {
      const key = element.getAttribute("data-lang-key");
      const translation = langData[key];
      if (translation) {
        element.innerHTML = translation;
      }
    });

    document.documentElement.lang = lang;
    document.title = langData.site_title.replace(/<[^>]*>?/gm, "");
    localStorage.setItem("preferredLanguage", lang);
    langButtons.forEach((btn) => {
      btn.classList.toggle("active", btn.getAttribute("data-lang") === lang);
    });
  };

  const initLanguageSwitcher = () => {
    langButtons.forEach((button) => {
      button.addEventListener("click", () => {
        const selectedLang = button.getAttribute("data-lang");
        setLanguage(selectedLang);
      });
    });
    const savedLang = localStorage.getItem("preferredLanguage") || "pt";
    setLanguage(savedLang);
  };

  const initMobileMenu = () => {
    const navToggle = document.querySelector(".nav-toggle");
    const nav = document.querySelector(".nav");

    if (!navToggle || !nav) return;

    navToggle.addEventListener("click", () => {
      const isVisible = nav.getAttribute("data-visible") === "true";
      nav.setAttribute("data-visible", !isVisible);
      navToggle.setAttribute("aria-expanded", !isVisible);
    });

    document.querySelectorAll(".nav-list a").forEach((link) => {
      link.addEventListener("click", () => {
        nav.setAttribute("data-visible", "false");
        navToggle.setAttribute("aria-expanded", "false");
      });
    });
  };

  const initScrollFadeIn = () => {
    const sections = document.querySelectorAll(".scroll-reveal, .reveal-item");
    if (sections.length === 0) return;

    const observer = new IntersectionObserver(
      (entries, obs) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("visible");
            obs.unobserve(entry.target);
          }
        });
      },
      { root: null, rootMargin: "0px 0px -50px 0px", threshold: 0.1 }
    );

    sections.forEach((section) => observer.observe(section));
  };

  const initFooterYear = () => {
    const yearSpan = document.getElementById("year");
    if (yearSpan) yearSpan.textContent = new Date().getFullYear();
  };

  initLanguageSwitcher();
  initMobileMenu();
  initScrollFadeIn();
  initFooterYear();
});
